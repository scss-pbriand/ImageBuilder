@inherits LayoutComponentBase

<PageTitle>Image Asset Uploader</PageTitle>

<Layout>
    <div class="container mt-4">
        <h1>Upload Image Assets</h1>
        <DataGrid TItem="ImageAsset" Data="imageAssets" AutoGenerateColumns="true">
            <DataGridCommandColumn>
                <CommandButton Text="Delete" Clicked="DeleteImageAsset" />
            </DataGridCommandColumn>
        </DataGrid>

        <FileEdit OnChange="UploadImageAsset" />
    </div>
</Layout>

@code {
    private List<ImageAsset> imageAssets = new();

    private async Task UploadImageAsset(FileChangedEventArgs e)
    {
        foreach (var file in e.Files)
        {
            var imageAsset = new ImageAsset
            {
                Id = Guid.NewGuid(),
                Name = file.Name,
                FilePath = $"/uploads/{file.Name}",
                CreatedAt = DateTime.UtcNow
            };

            imageAssets.Add(imageAsset);

            // TODO: Save the file to the server
        }
    }

    private void DeleteImageAsset(ImageAsset imageAsset)
    {
        imageAssets.Remove(imageAsset);
    }
}